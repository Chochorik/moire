(function(){"use strict";var t={888:function(t,e,r){var a=r(9242),o=r(3396);function s(t,e,r,a,s,i){const l=(0,o.up)("VHeader"),c=(0,o.up)("RouterView"),n=(0,o.up)("VFooter");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(l),(0,o.Wm)(c),(0,o.Wm)(n)],64)}const i={class:"footer container"},l=(0,o.uE)('<div class="footer__wrapper"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@moire.com"> hi@moire.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="/img/svg/sprite.svg#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="/img/svg/sprite.svg#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="/img/svg/sprite.svg#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="/img/svg/sprite.svg#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="/img/svg/sprite.svg#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Moire </span></div>',1),c=[l];function n(t,e,r,a,s,l){return(0,o.wg)(),(0,o.iD)("footer",i,c)}var u={name:"VFooter"},d=r(89);const p=(0,d.Z)(u,[["render",n]]);var m=p;const _={class:"header container"},h={class:"header__wrapper"},g={class:"header__info"},f={class:"header__info"},y={class:"header__info"},v={class:"header__info"},b={class:"header__info"},w=(0,o._)("img",{src:"/img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"},null,-1),k=(0,o._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1);function I(t,e,r,s,i,l){const c=(0,o.up)("RouterLink"),n=(0,o.up)("VCartIndicator");return(0,o.wg)(),(0,o.iD)("header",_,[(0,o._)("div",h,[(0,o.wy)((0,o._)("span",g,"Каталог",512),[[a.F8,"main"===t.$route.name]]),(0,o.wy)((0,o._)("span",f,"Товар",512),[[a.F8,"product"===t.$route.name]]),(0,o.wy)((0,o._)("span",y,"Корзина",512),[[a.F8,"cart"===t.$route.name]]),(0,o.wy)((0,o._)("span",v,"Оформление заказа",512),[[a.F8,"order"===t.$route.name]]),(0,o.wy)((0,o._)("span",b,"Информация о заказе",512),[[a.F8,"order-info"===t.$route.name]]),(0,o.Wm)(c,{class:"header__logo",to:"/"},{default:(0,o.w5)((()=>[w])),_:1}),k,(0,o.Wm)(n)])])}var C=r(7139);const P=(0,o._)("svg",{width:"19",height:"24"},[(0,o._)("use",{"xlink:href":"/img/svg/sprite.svg#icon-cart"})],-1),D={class:"header__count","aria-label":"Количество товаров"};function F(t,e,r,a,s,i){const l=(0,o.up)("RouterLink");return(0,o.wg)(),(0,o.j4)(l,{class:"header__cart","aria-label":"Корзина с товарами",to:{name:"cart"}},{default:(0,o.w5)((()=>[P,(0,o._)("span",D,(0,C.zw)(i.getCartProductsAmount),1)])),_:1})}var z={computed:{getCartProductsAmount(){return this.$store.state.products.cartProductsData.length}}};const A=(0,d.Z)(z,[["render",F]]);var L=A,U={components:{VCartIndicator:L}};const S=(0,d.Z)(U,[["render",I]]);var T=S,V=r(65),$={components:{VHeader:T,VFooter:m},methods:{...(0,V.nv)({loadCart:"products/loadCart"}),...(0,V.OI)({updateUserAccessKey:"updateUserAccessKey"})},created(){const t=localStorage.getItem("accessKey");t&&this.updateUserAccessKey(t),this.loadCart()}};const x=(0,d.Z)($,[["render",s]]);var O=x,M=r(2483);const Z=t=>((0,o.dD)("data-v-1e655a38"),t=t(),(0,o.Cn)(),t),K={class:"content container"},W={class:"content__top"},q={class:"content__row"},j=Z((()=>(0,o._)("h1",{class:"content__title"},"Каталог",-1))),E={class:"content__info"},H={class:"content__catalog"},Y={class:"catalog"},N={key:0},R=Z((()=>(0,o._)("img",{class:"catalog__preloader",src:"img/preloader.gif",alt:"Идет загрузка.."},null,-1))),G=[R],B={key:1,class:"catalog__loading-error"};function J(t,e,r,s,i,l){const c=(0,o.up)("ProductFilter"),n=(0,o.up)("ProductCatalog"),u=(0,o.up)("VPagination");return(0,o.wg)(),(0,o.iD)("main",K,[(0,o._)("div",W,[(0,o._)("div",q,[j,(0,o._)("span",E,(0,C.zw)(l.countProducts)+" товара ",1)])]),(0,o._)("div",H,[(0,o.Wm)(c,{"price-from":i.filterPriceFrom,"onUpdate:priceFrom":e[0]||(e[0]=t=>i.filterPriceFrom=t),"price-to":i.filterPriceTo,"onUpdate:priceTo":e[1]||(e[1]=t=>i.filterPriceTo=t),"category-id":i.filterCategoryId,"onUpdate:categoryId":e[2]||(e[2]=t=>i.filterCategoryId=t),"colors-array":i.filterColors,"onUpdate:colorsArray":e[3]||(e[3]=t=>i.filterColors=t),"materials-array":i.filterMaterials,"onUpdate:materialsArray":e[4]||(e[4]=t=>i.filterMaterials=t),"seasons-array":i.filterSeasons,"onUpdate:seasonsArray":e[5]||(e[5]=t=>i.filterSeasons=t)},null,8,["price-from","price-to","category-id","colors-array","materials-array","seasons-array"]),(0,o._)("section",Y,[(0,o.Wm)(n,{products:l.products},null,8,["products"]),i.productsLoadingStatus?((0,o.wg)(),(0,o.iD)("div",N,G)):(0,o.kq)("",!0),i.productsLoadingFailed?((0,o.wg)(),(0,o.iD)("div",B,[(0,o.Uk)(" Произошла ошибка при загрузке "),(0,o._)("button",{class:"catalog__reload-btn",onClick:e[6]||(e[6]=(0,a.iM)(((...t)=>l.loadProducts&&l.loadProducts(...t)),["prevent"]))}," Попробовать еще раз ")])):(0,o.kq)("",!0),(0,o.Wm)(u,{page:i.page,"onUpdate:page":e[7]||(e[7]=t=>i.page=t),count:l.countProducts,"per-page":i.productsPerPage},null,8,["page","count","per-page"])])])])}const Q={class:"filter"},X={class:"filter__form form"},tt={class:"form__block"},et=(0,o._)("legend",{class:"form__legend"},"Цена",-1),rt={class:"form__label form__label--price"},at=(0,o._)("span",{class:"form__value"},"От",-1),ot={class:"form__label form__label--price"},st=(0,o._)("span",{class:"form__value"},"До",-1),it={class:"form__block"},lt=(0,o._)("legend",{class:"form__legend"},"Категория",-1),ct={class:"form__label form__label--select"},nt=(0,o._)("option",{value:"0",selected:"",disabled:""},"Все категории",-1),ut=["value"],dt={class:"form__block"},pt=(0,o._)("legend",{class:"form__legend"},"Цвет",-1),mt={class:"colors colors--black"},_t={class:"colors__label"},ht=["value"],gt={class:"form__block"},ft=(0,o._)("legend",{class:"form__legend"},"Материал",-1),yt={class:"check-list"},vt={class:"check-list__label"},bt=["value"],wt={class:"check-list__desc"},kt={class:"form__block"},It=(0,o._)("legend",{class:"form__legend"},"Коллекция",-1),Ct={class:"check-list"},Pt={class:"check-list__label"},Dt=["value"],Ft={class:"check-list__desc"};function zt(t,e,r,s,i,l){return(0,o.wg)(),(0,o.iD)("aside",Q,[(0,o._)("form",X,[(0,o._)("fieldset",tt,[et,(0,o._)("label",rt,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":e[0]||(e[0]=t=>i.currentPriceFrom=t)},null,512),[[a.nr,i.currentPriceFrom,void 0,{number:!0}]]),at]),(0,o._)("label",ot,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":e[1]||(e[1]=t=>i.currentPriceTo=t)},null,512),[[a.nr,i.currentPriceTo,void 0,{number:!0}]]),st])]),(0,o._)("fieldset",it,[lt,(0,o._)("label",ct,[(0,o.wy)((0,o._)("select",{class:"form__select",type:"text",name:"category","onUpdate:modelValue":e[2]||(e[2]=t=>i.currentCategoryId=t)},[nt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.categories,(t=>((0,o.wg)(),(0,o.iD)("option",{key:t.id,value:t.id},(0,C.zw)(t.title),9,ut)))),128))],512),[[a.bM,i.currentCategoryId]])])]),(0,o._)("fieldset",dt,[pt,(0,o._)("ul",mt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.colors,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.id,class:"colors__item"},[(0,o._)("label",_t,[(0,o.wy)((0,o._)("input",{value:t.id,"onUpdate:modelValue":e[3]||(e[3]=t=>i.currentColorIds=t),class:"colors__radio sr-only",type:"checkbox",name:"colors"},null,8,ht),[[a.e8,i.currentColorIds]]),(0,o._)("span",{class:"colors__value",style:(0,C.j5)({backgroundColor:t.code})},null,4)])])))),128))])]),(0,o._)("fieldset",gt,[ft,(0,o._)("ul",yt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.materials,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.id,class:"check-list__item"},[(0,o._)("label",vt,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"check-list__check sr-only",name:"material",value:t.id,"onUpdate:modelValue":e[4]||(e[4]=t=>i.currentMaterialIds=t)},null,8,bt),[[a.e8,i.currentMaterialIds]]),(0,o._)("span",wt,[(0,o.Uk)((0,C.zw)(t.title)+" ",1),(0,o._)("span",null,"("+(0,C.zw)(t.productsCount)+")",1)])])])))),128))])]),(0,o._)("fieldset",kt,[It,(0,o._)("ul",Ct,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.seasons,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.id,class:"check-list__item"},[(0,o._)("label",Pt,[(0,o.wy)((0,o._)("input",{class:"check-list__check sr-only",type:"checkbox",name:"collection",value:t.id,"onUpdate:modelValue":e[5]||(e[5]=t=>i.currentSeasonIds=t)},null,8,Dt),[[a.e8,i.currentSeasonIds]]),(0,o._)("span",Ft,[(0,o.Uk)((0,C.zw)(t.title)+" ",1),(0,o._)("span",null,"("+(0,C.zw)(t.productsCount)+")",1)])])])))),128))])]),(0,o._)("button",{class:"filter__submit button button--primery",type:"submit",onClick:e[6]||(e[6]=(0,a.iM)(((...t)=>l.submit&&l.submit(...t)),["prevent"]))}," Применить "),(0,o.wy)((0,o._)("button",{class:"filter__reset button button--second",type:"button",onClick:e[7]||(e[7]=(0,a.iM)(((...t)=>l.reset&&l.reset(...t)),["prevent"]))}," Сбросить ",512),[[a.F8,l.showing]])])])}r(7658);var At=r(4161);const Lt="https://vue-moire.skillbox.cc";var Ut={data(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentColorIds:[],currentMaterialIds:[],currentSeasonIds:[],categoriesData:null,colorsData:null,seasonsData:null,materialsData:null}},props:{priceFrom:{type:Number,default:0},priceTo:{type:Number,default:0},categoryId:{type:Number,default:0},colorsArray:{type:Array},materialsArray:{type:Array},seasonsArray:{type:Array}},computed:{categories(){return this.categoriesData?this.categoriesData:[]},colors(){return this.colorsData?this.colorsData:[]},seasons(){return this.seasonsData?this.seasonsData:[]},materials(){return this.materialsData?this.materialsData:[]},showing(){return this.currentPriceFrom>0||this.currentPriceTo>0||0!==this.currentCategoryId||this.currentColorIds.length>0||this.currentMaterialIds.length>0||this.currentSeasonIds.length>0}},watch:{priceFrom(t){this.currentPriceFrom=t},priceTo(t){this.currentPriceTo=t},categoryId(t){this.currentCategoryId=t}},emits:["update:price-from","update:price-to","update:category-id","update:colors-array","update:materials-array","update:seasons-array"],methods:{submit(){this.$emit("update:price-from",this.currentPriceFrom),this.$emit("update:price-to",this.currentPriceTo),this.$emit("update:category-id",this.currentCategoryId),this.$emit("update:colors-array",this.currentColorIds),this.$emit("update:materials-array",this.currentMaterialIds),this.$emit("update:seasons-array",this.currentSeasonIds)},reset(){this.currentCategoryId=0,this.currentPriceFrom=0,this.currentCategoryId=0,this.currentColorIds=[],this.currentMaterialIds=[],this.currentSeasonIds=[],this.$emit("update:price-from",0),this.$emit("update:price-to",0),this.$emit("update:category-id",0),this.$emit("update:colors-array",[]),this.$emit("update:materials-array",[]),this.$emit("update:seasons-array",[])},getCategories(){At.Z.get(`${Lt}/api/productCategories`).then((t=>{this.categoriesData=t.data.items}))},getSeasons(){At.Z.get(`${Lt}/api/seasons`).then((t=>{this.seasonsData=t.data.items}))},getMaterials(){At.Z.get(`${Lt}/api/materials`).then((t=>{this.materialsData=t.data.items}))},getColors(){At.Z.get(`${Lt}/api/colors`).then((t=>{this.colorsData=t.data.items}))},pushColors(t){this.currentColorIds.push(t)}},created(){this.getCategories(),this.getSeasons(),this.getMaterials(),this.getColors()}};const St=(0,d.Z)(Ut,[["render",zt]]);var Tt=St;const Vt={class:"catalog__list"};function $t(t,e,r,a,s,i){const l=(0,o.up)("ProductItem");return(0,o.wg)(),(0,o.iD)("ul",Vt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.products,(t=>((0,o.wg)(),(0,o.j4)(l,{key:t.id,product:t},null,8,["product"])))),128))])}const xt={class:"catalog__item"},Ot=["src","alt"],Mt={class:"catalog__title"},Zt={href:"#"},Kt={class:"catalog__price"},Wt={class:"colors colors--black"},qt={class:"colors__label"},jt=["value"];function Et(t,e,r,s,i,l){const c=(0,o.up)("RouterLink");return(0,o.wg)(),(0,o.iD)("li",xt,[(0,o.Wm)(c,{class:"catalog__pic",to:{name:"product",params:{id:r.product.id}}},{default:(0,o.w5)((()=>[(0,o._)("img",{src:l.currentImage?l.currentImage:"https://t-bike.ru/images/products/no-image.jpg",alt:r.product.title},null,8,Ot)])),_:1},8,["to"]),(0,o._)("h3",Mt,[(0,o._)("a",Zt,(0,C.zw)(r.product.title),1)]),(0,o._)("span",Kt,(0,C.zw)(l.numberFormat(r.product.price))+" ₽ ",1),(0,o._)("ul",Wt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.colorsArray,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:t.id},[(0,o._)("label",qt,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"radio",name:"color",value:t.id,"onUpdate:modelValue":e[0]||(e[0]=t=>i.currentColor=t)},null,8,jt),[[a.G2,i.currentColor]]),(0,o._)("span",{class:"colors__value",style:(0,C.j5)({backgroundColor:t.code})},null,4)])])))),128))])])}function Ht(t){return(new Intl.NumberFormat).format(t)}var Yt={name:"ProductItem",data(){return{currentColor:0}},props:{product:{type:Object}},computed:{colors(){return this.product.colors},currentImage:{get(){if(this.product){const t=this.colors.find((t=>t.color.id===this.currentColor));if(null!==t.gallery)return t.gallery.find((t=>"undefined"!==typeof t)).file.url}return""},cache:!1,lazy:!0},colorsArray:{get(){return this.product?this.parseColors(this.product.colors):[]},cache:!1,lazy:!0}},methods:{numberFormat:Ht,parseColors(t){const e=[];for(const r of t)e.push(r.color);return e},selectColor(t){const e=t.target.value;this.currentColor=e},firstColor(){this.currentColor=this.colors[0].color.id}},created(){this.firstColor()}};const Nt=(0,d.Z)(Yt,[["render",Et]]);var Rt=Nt,Gt={name:"ProductCatalog",components:{ProductItem:Rt},props:{products:{type:Array}}};const Bt=(0,d.Z)(Gt,[["render",$t]]);var Jt=Bt;const Qt={class:"catalog__pagination pagination"},Xt=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"img/svg/sprite.svg#icon-arrow-left"})],-1),te=[Xt],ee=["onClick"],re=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"img/svg/sprite.svg#icon-arrow-right"})],-1),ae=[re];function oe(t,e,r,s,i,l){return(0,o.wg)(),(0,o.iD)("ul",Qt,[(0,o._)("li",{class:"pagination__item",onClick:e[0]||(e[0]=(0,a.iM)(((...t)=>l.prevPage&&l.prevPage(...t)),["prevent"]))},[(0,o._)("a",{class:(0,C.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1===r.page}]),"aria-label":"Предыдущая страница"},te,2)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.pages,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"pagination__item",key:t,onClick:(0,a.iM)((e=>l.paginate(t)),["prevent"])},[(0,o._)("a",{class:(0,C.C_)(["pagination__link",{"pagination__link--current":t===r.page}])},(0,C.zw)(t),3)],8,ee)))),128)),(0,o._)("li",{class:"pagination__item",onClick:e[1]||(e[1]=(0,a.iM)(((...t)=>l.nextPage&&l.nextPage(...t)),["prevent"]))},[(0,o._)("a",{class:(0,C.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":r.page===l.pages}]),href:"#","aria-label":"Следующая страница"},ae,2)])])}var se={props:{page:{type:Number},count:{type:Number,required:!0},perPage:{type:Number,required:!0}},computed:{pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t){this.$emit("update:page",t)},prevPage(){this.page>1&&this.$emit("update:page",this.page-1)},nextPage(){this.$emit("update:page",this.page+1)}}};const ie=(0,d.Z)(se,[["render",oe]]);var le=ie,ce={components:{ProductFilter:Tt,ProductCatalog:Jt,VPagination:le},data(){return{filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColors:[],filterMaterials:[],filterSeasons:[],page:1,productsPerPage:6,productsData:null,productsLoadingStatus:!1,productsLoadingFailed:!1}},computed:{products(){return this.productsData?this.productsData.items.map((t=>({...t,image:this.findImage(t.colors),firstlyColorId:t.colors[0].color.id}))):[]},countProducts(){return this.productsData?this.productsData.pagination.total:0}},methods:{loadProducts(){this.productsLoadingStatus=!0,this.productsLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{At.Z.get(`${Lt}/api/products`,{params:{page:this.page,limit:this.productsPerPage,categoryId:this.filterCategoryId,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo,colorIds:this.filterColors,materialIds:this.filterMaterials,seasonIds:this.filterSeasons}}).then((t=>{this.productsData=t.data})).catch((()=>{this.productsLoadingFailed=!0})).then((()=>{this.productsLoadingStatus=!1}))}),0)},findImage(t){for(const e of t)if(null!==e.gallery){for(const t of e.gallery)return t.file.url;return"https://t-bike.ru/images/products/no-image.jpg"}}},created(){this.loadProducts()},watch:{page(){this.loadProducts()},filterPriceFrom(){this.loadProducts()},filterPriceTo(){this.loadProducts()},filterCategoryId(){this.loadProducts()},filterColors(){this.loadProducts()},filterMaterials(){this.loadProducts()},filterSeasons(){this.loadProducts()}}};const ne=(0,d.Z)(ce,[["render",J],["__scopeId","data-v-1e655a38"]]);var ue=ne;const de=t=>((0,o.dD)("data-v-18216055"),t=t(),(0,o.Cn)(),t),pe={key:0},me=de((()=>(0,o._)("img",{class:"product__preloader",src:"/img/preloader.gif",alt:"Идет загрузка.."},null,-1))),_e=[me],he={key:1,class:"product__loading-error"},ge={key:2,class:"content container"},fe={class:"content__top"},ye={class:"breadcrumbs"},ve={class:"breadcrumbs__item"},be={class:"breadcrumbs__item"},we={class:"breadcrumbs__item"},ke={class:"breadcrumbs__link"},Ie={class:"item"},Ce={class:"item__pics pics"},Pe={class:"pics__wrapper"},De=["alt","src"],Fe={class:"pics__list"},ze={class:"pics__link pics__link--current"},Ae=["alt","src"],Le={class:"item__info"},Ue={class:"item__code"},Se={class:"item__title"},Te={class:"item__form"},Ve={class:"form",action:"#",method:"POST"},$e={class:"item__row item__row--center"},xe={class:"item__price"},Oe={class:"item__row"},Me={class:"form__block"},Ze=de((()=>(0,o._)("legend",{class:"form__legend"},"Цвет",-1))),Ke={class:"colors colors--black"},We={class:"colors__label"},qe=["value"],je={class:"form__block"},Ee=de((()=>(0,o._)("legend",{class:"form__legend"},"Размер",-1))),He={class:"form__label form__label--small form__label--select"},Ye=["value"],Ne={key:0,class:"item__button-text"},Re={key:1,class:"item__button-text"},Ge={key:2,class:"item__button-text"},Be=(0,o.uE)('<div class="item__desc" data-v-18216055><ul class="tabs" data-v-18216055><li class="tabs__item" data-v-18216055><a class="tabs__link tabs__link--current" data-v-18216055> Информация о товаре </a></li><li class="tabs__item" data-v-18216055><a class="tabs__link" href="#" data-v-18216055> Доставка и возврат </a></li></ul><div class="item__content" data-v-18216055><h3 data-v-18216055>Состав:</h3><p data-v-18216055> 60% хлопок<br data-v-18216055> 30% полиэстер<br data-v-18216055></p><h3 data-v-18216055>Уход:</h3><p data-v-18216055> Машинная стирка при макс. 30ºC короткий отжим<br data-v-18216055> Гладить при макс. 110ºC<br data-v-18216055> Не использовать машинную сушку<br data-v-18216055> Отбеливать запрещено<br data-v-18216055> Не подвергать химчистке<br data-v-18216055></p></div></div>',1);function Je(t,e,r,s,i,l){const c=(0,o.up)("RouterLink"),n=(0,o.up)("ProductCounter");return(0,o.wg)(),(0,o.iD)(o.HY,null,[i.productsLoadingStatus?((0,o.wg)(),(0,o.iD)("div",pe,_e)):(0,o.kq)("",!0),i.productsLoadingFailed?((0,o.wg)(),(0,o.iD)("div",he,[(0,o.Uk)(" Произошла ошибка при загрузке "),(0,o._)("button",{class:"product__reload-btn",onClick:e[0]||(e[0]=(0,a.iM)(((...e)=>t.loadProducts&&t.loadProducts(...e)),["prevent"]))}," Попробовать еще раз ")])):((0,o.wg)(),(0,o.iD)("main",ge,[(0,o._)("div",fe,[(0,o._)("ul",ye,[(0,o._)("li",ve,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",be,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,C.zw)(l.categoryTitle),1)])),_:1})]),(0,o._)("li",we,[(0,o._)("p",ke,(0,C.zw)(l.title),1)])])]),(0,o._)("section",Ie,[(0,o._)("div",Ce,[(0,o._)("div",Pe,[(0,o._)("img",{width:"570",height:"570",alt:l.title,src:l.currentImage?l.currentImage:"https://t-bike.ru/images/products/no-image.jpg"},null,8,De)]),(0,o._)("ul",Fe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.otherImages,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"pics__item",key:t.id},[(0,o._)("a",ze,[(0,o._)("img",{width:"98",height:"98",alt:l.title,src:null!==t.gallery?t.gallery[0].file.url:"https://t-bike.ru/images/products/no-image.jpg"},null,8,Ae)])])))),128))])]),(0,o._)("div",Le,[(0,o._)("span",Ue,"Артикул: "+(0,C.zw)(l.id),1),(0,o._)("h2",Se,(0,C.zw)(l.title),1),(0,o._)("div",Te,[(0,o._)("form",Ve,[(0,o._)("div",$e,[(0,o.Wm)(n,{amount:i.amount,"onUpdate:amount":e[1]||(e[1]=t=>i.amount=t),min:1,max:100},null,8,["amount"]),(0,o._)("b",xe,(0,C.zw)(l.numberFormat(l.calcSum))+" ₽ ",1)]),(0,o._)("div",Oe,[(0,o._)("fieldset",Me,[Ze,(0,o._)("ul",Ke,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.colorsArray,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:t.id},[(0,o._)("label",We,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"radio",name:"color-item",value:t.id,"onUpdate:modelValue":e[2]||(e[2]=t=>i.colorId=t)},null,8,qe),[[a.G2,i.colorId]]),(0,o._)("span",{class:"colors__value",style:(0,C.j5)({backgroundColor:t.code})},null,4)])])))),128))])]),(0,o._)("fieldset",je,[Ee,(0,o._)("label",He,[(0,o.wy)((0,o._)("select",{class:"form__select",type:"text",name:"category","onUpdate:modelValue":e[3]||(e[3]=t=>i.sizeId=t)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.sizes,(t=>((0,o.wg)(),(0,o.iD)("option",{key:t.id,value:t.id},(0,C.zw)(t.title),9,Ye)))),128))],512),[[a.bM,i.sizeId]])])])]),(0,o._)("button",{class:"item__button button button--primery",type:"submit",onClick:e[4]||(e[4]=(0,a.iM)(((...t)=>l.addToCart&&l.addToCart(...t)),["prevent"]))},[i.productAddSending?((0,o.wg)(),(0,o.iD)("p",Ne," Добавляем... ")):i.productAdded?((0,o.wg)(),(0,o.iD)("p",Re," Добавлено ")):((0,o.wg)(),(0,o.iD)("p",Ge," В корзину "))])])])]),Be])]))],64)}const Qe={class:"form__counter"},Xe=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"/img/svg/sprite.svg#icon-minus"})],-1),tr=[Xe],er=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"/img/svg/sprite.svg#icon-plus"})],-1),rr=[er];function ar(t,e,r,s,i,l){return(0,o.wg)(),(0,o.iD)("div",Qe,[(0,o._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=(0,a.iM)(((...t)=>l.decrement&&l.decrement(...t)),["prevent"]))},tr),(0,o.wy)((0,o._)("input",{type:"text",name:"count","onUpdate:modelValue":e[1]||(e[1]=t=>i.amount=t)},null,512),[[a.nr,i.amount]]),(0,o._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[2]||(e[2]=(0,a.iM)(((...t)=>l.increment&&l.increment(...t)),["prevent"]))},rr)])}var or={props:{value:{type:Number,default:1},min:{type:Number,default:1},max:{type:Number,default:100}},emits:["update:amount"],data(){return{amount:this.value}},methods:{decrement(){this.amount>this.min&&(this.amount-=1,this.$emit("update:amount",this.amount))},increment(){this.amount<this.max&&(this.amount+=1,this.$emit("update:amount",this.amount))}},watch:{amount(){this.amount>this.min&&this.amount<this.max&&this.$emit("update:amount",Number(this.amount))}}};const sr=(0,d.Z)(or,[["render",ar]]);var ir=sr,lr={data(){return{amount:1,colorId:0,sizeId:0,productData:null,productsLoadingStatus:!1,productsLoadingFailed:!1,productAdded:!1,productAddSending:!1}},components:{ProductCounter:ir},computed:{product:{get(){if(this.productData)return this.productData},cache:!1,lazy:!0},id:{get(){if(this.product)return this.product.id},cache:!1,lazy:!0},category:{get(){if(this.product)return this.product.category},cache:!1,lazy:!0},categoryTitle:{get(){return this.category?this.category.title:""},cache:!1,lazy:!0},title:{get(){return this.product?this.product.title:""},cache:!1,lazy:!0},price:{get(){return this.product?this.product.price:0},cache:!1,lazy:!0},colors:{get(){return this.product?this.product.colors:[]},cache:!1,lazy:!0},sizes:{get(){return this.product?this.product.sizes:[]},cache:!1,lazy:!0},calcSum(){return this.amount*this.price},currentImage:{get(){if(this.product){const t=this.colors.find((t=>t.color.id===this.colorId));if(null!==t.gallery)return t.gallery.find((t=>"undefined"!==typeof t)).file.url}return""},cache:!1,lazy:!0},colorsArray:{get(){return this.product?this.parseColors(this.product.colors):[]},cache:!1,lazy:!0},otherImages(){return this.colors}},methods:{...(0,V.nv)({addProductToCart:"products/addProductToCart"}),addToCart(){this.productAdded=!1,this.productAddSending=!0,this.addProductToCart({productId:this.product.id,colorId:this.colorId,sizeId:this.sizeId,quantity:this.amount}).then((()=>{this.productAdded=!0,this.productAddSending=!1}))},numberFormat:Ht,loadProduct(){this.productsLoadingStatus=!0,this.productsLoadingFailed=!1,At.Z.get(`${Lt}/api/products/`+this.$route.params.id).then((t=>{this.productData=t.data,this.colorId=this.productData.colors[0].color.id,this.sizeId=this.productData.sizes[0].id})).catch((()=>this.productsLoadingFailed=!0)).then((()=>this.productsLoadingStatus=!1))},parseColors(t){const e=[];for(const r of t)e.push(r.color);return e}},watch:{"$route.params.id":{handler(){this.loadProduct()},immediate:!0}},created(){this.loadProduct()}};const cr=(0,d.Z)(lr,[["render",Je],["__scopeId","data-v-18216055"]]);var nr=cr;function ur(t,e,r,a,s,i){return(0,o.wg)(),(0,o.iD)("h1",null," Страница не найдена ")}var dr={name:"NotFound"};const pr=(0,d.Z)(dr,[["render",ur]]);var mr=pr;const _r=t=>((0,o.dD)("data-v-f78908da"),t=t(),(0,o.Cn)(),t),hr={class:"content container"},gr={class:"content__top"},fr={class:"breadcrumbs"},yr={class:"breadcrumbs__item"},vr=_r((()=>(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("a",{class:"breadcrumbs__link"},"Корзина")],-1))),br={class:"content__row"},wr=_r((()=>(0,o._)("h1",{class:"content__title"},"Корзина",-1))),kr={class:"content__info"},Ir={class:"cart"},Cr={class:"cart__form form",action:"#",method:"POST"},Pr={key:0},Dr=_r((()=>(0,o._)("img",{class:"product__preloader",src:"/img/preloader.gif",alt:"Идет загрузка.."},null,-1))),Fr=[Dr],zr={key:1,class:"product__loading-error"},Ar={class:"cart__block"},Lr=_r((()=>(0,o._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1))),Ur={class:"cart__price"};function Sr(t,e,r,s,i,l){const c=(0,o.up)("RouterLink"),n=(0,o.up)("CartList");return(0,o.wg)(),(0,o.iD)("main",hr,[(0,o._)("div",gr,[(0,o._)("ul",fr,[(0,o._)("li",yr,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),vr]),(0,o._)("div",br,[wr,(0,o._)("span",kr,(0,C.zw)(t.totalAmount)+" товара ",1)])]),(0,o._)("section",Ir,[(0,o._)("form",Cr,[(0,o.Wm)(n,{products:t.products},{default:(0,o.w5)((()=>[t.productsCartLoadingStatus?((0,o.wg)(),(0,o.iD)("div",Pr,Fr)):(0,o.kq)("",!0),t.productsCartLoadingFailed?((0,o.wg)(),(0,o.iD)("div",zr,[(0,o.Uk)(" Произошла ошибка при загрузке "),(0,o._)("button",{class:"product__reload-btn",onClick:e[0]||(e[0]=(0,a.iM)(((...e)=>t.products&&t.products(...e)),["prevent"]))}," Попробовать еще раз ")])):(0,o.kq)("",!0)])),_:1},8,["products"]),(0,o._)("div",Ar,[Lr,(0,o._)("p",Ur,[(0,o.Uk)(" Итого: "),(0,o._)("span",null,(0,C.zw)(l.numberFormat(t.totalPrice))+" ₽",1)]),(0,o.wy)((0,o.Wm)(c,{to:{name:"order"},class:"cart__button button button--primery",type:"submit"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Оформить заказ ")])),_:1},512),[[a.F8,l.showing]])])])])])}const Tr={class:"cart__field"},Vr={class:"cart__list"};function $r(t,e,r,a,s,i){const l=(0,o.up)("CartItem");return(0,o.wg)(),(0,o.iD)("div",Tr,[(0,o.WI)(t.$slots,"default"),(0,o._)("ul",Vr,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.products,((t,e)=>((0,o.wg)(),(0,o.j4)(l,{key:e,item:t},null,8,["item"])))),128))])])}const xr=t=>((0,o.dD)("data-v-3c2ae033"),t=t(),(0,o.Cn)(),t),Or={class:"cart__item product"},Mr={class:"product__pic"},Zr=["src","alt"],Kr={class:"product__title"},Wr={class:"product__info product__info--color product__info--color_first"},qr={class:"product__info product__info--color product__info--size"},jr={class:"product__code"},Er={class:"product__price"},Hr=xr((()=>(0,o._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"/img/svg/sprite.svg#icon-close"})],-1))),Yr=[Hr];function Nr(t,e,r,s,i,l){const c=(0,o.up)("ProductCounter");return(0,o.wg)(),(0,o.iD)("li",Or,[(0,o._)("div",Mr,[(0,o._)("img",{src:l.image,alt:r.item.product.title,width:"120",height:"120"},null,8,Zr)]),(0,o._)("h3",Kr,(0,C.zw)(r.item.product.title),1),(0,o._)("p",Wr,[(0,o.Uk)(" Цвет: "),(0,o._)("span",null,[(0,o._)("i",{style:(0,C.j5)({backgroundColor:l.color.code})},null,4),(0,o.Uk)(" "+(0,C.zw)(t.$t(l.colorTitle)),1)])]),(0,o._)("p",qr,[(0,o.Uk)(" Размер: "),(0,o._)("span",null,(0,C.zw)(l.size),1)]),(0,o._)("span",jr," Артикул: "+(0,C.zw)(r.item.product.id),1),(0,o.Wm)(c,{amount:l.amount,"onUpdate:amount":e[0]||(e[0]=t=>l.amount=t),value:l.amount,min:1,max:100,class:"product__counter form__counter"},null,8,["amount","value"]),(0,o._)("b",Er,(0,C.zw)(l.numberFormat(l.price))+" ₽ ",1),(0,o._)("button",{onClick:e[1]||(e[1]=(0,a.iM)(((...t)=>l.deleteProduct&&l.deleteProduct(...t)),["prevent"])),class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины"},Yr)])}var Rr={props:{item:{type:Object,required:!0}},components:{ProductCounter:ir},computed:{image(){return this.item.image},amount:{get(){return this.item.quantity},set(t){this.updateCartProductAmount({productId:this.item.id,quantity:t})},cache:!1,lazy:!0},price(){return this.item.price*this.item.quantity},color(){return this.item.color.color},colorTitle(){return this.color.title.toLowerCase().trim()},size(){return this.item.size.title}},methods:{...(0,V.nv)({deleteCartProduct:"products/deleteCartProduct",updateCartProductAmount:"products/updateCartProductAmount"}),numberFormat:Ht,deleteProduct(){this.deleteCartProduct({productId:this.item.id})}}};const Gr=(0,d.Z)(Rr,[["render",Nr],["__scopeId","data-v-3c2ae033"]]);var Br=Gr,Jr={props:{products:{type:Array,required:!0}},components:{CartItem:Br}};const Qr=(0,d.Z)(Jr,[["render",$r]]);var Xr=Qr,ta={components:{CartList:Xr},methods:{numberFormat:Ht},computed:{...(0,V.Se)("products",{products:"cartDetailProducts",totalPrice:"cartTotalPrice",totalAmount:"getTotalAmount"}),...(0,V.rn)("products",{productsCartLoadingStatus:t=>t.productsCartLoadingStatus,productsCartLoadingFailed:t=>t.productsCartLoadingFailed}),showing(){if(this.products.length>0)return!0}}};const ea=(0,d.Z)(ta,[["render",Sr],["__scopeId","data-v-f78908da"]]);var ra=ea;const aa={class:"content container"},oa={class:"content__top"},sa={class:"breadcrumbs"},ia={class:"breadcrumbs__item"},la={class:"breadcrumbs__item"},ca=(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("p",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),na=(0,o._)("div",{class:"content__row"},[(0,o._)("h1",{class:"content__title"},"Оформление заказа")],-1),ua={class:"cart"},da={class:"cart__field"},pa={class:"cart__data"},ma={class:"cart__options"},_a=(0,o._)("h3",{class:"cart__title"},"Доставка",-1),ha={class:"cart__options options"},ga={class:"options__label"},fa=["value"],ya={class:"options__value"},va=(0,o._)("h3",{class:"cart__title"},"Оплата",-1),ba={class:"cart__options options"},wa={class:"options__label"},ka=["value"],Ia={class:"options__value"},Ca={class:"cart__error form__error-block"},Pa=(0,o._)("h4",null,"Заявка не отправлена!",-1);function Da(t,e,r,s,i,l){const c=(0,o.up)("RouterLink"),n=(0,o.up)("VFormText"),u=(0,o.up)("VFormTextareaVue"),d=(0,o.up)("OrderProductsPanel");return(0,o.wg)(),(0,o.iD)("main",aa,[(0,o._)("div",oa,[(0,o._)("ul",sa,[(0,o._)("li",ia,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",la,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),ca]),na]),(0,o._)("section",ua,[(0,o._)("form",{class:"cart__form form",onSubmit:e[7]||(e[7]=(0,a.iM)(((...t)=>l.makeOrder&&l.makeOrder(...t)),["prevent"]))},[(0,o._)("div",da,[(0,o._)("div",pa,[(0,o.Wm)(n,{modelValue:i.formData.name,"onUpdate:modelValue":e[0]||(e[0]=t=>i.formData.name=t),error:i.formError.name,title:"ФИО",placeholder:"Введите ваше полное имя"},null,8,["modelValue","error"]),(0,o.Wm)(n,{modelValue:i.formData.address,"onUpdate:modelValue":e[1]||(e[1]=t=>i.formData.address=t),error:i.formError.address,title:"Адрес доставки",placeholder:"Введите ваш адрес"},null,8,["modelValue","error"]),(0,o.Wm)(n,{modelValue:i.formData.phone,"onUpdate:modelValue":e[2]||(e[2]=t=>i.formData.phone=t),error:i.formError.phone,type:"tel",title:"Телефон",placeholder:"Введите ваш телефон"},null,8,["modelValue","error"]),(0,o.Wm)(n,{modelValue:i.formData.email,"onUpdate:modelValue":e[3]||(e[3]=t=>i.formData.email=t),error:i.formError.email,type:"email",title:"Email",placeholder:"Введи ваш Email"},null,8,["modelValue","error"]),(0,o.Wm)(u,{modelValue:i.formData.comment,"onUpdate:modelValue":e[4]||(e[4]=t=>i.formData.comment=t),error:i.formError.comment,title:"Комментарии к заказу",placeholder:"Ваши пожелания"},null,8,["modelValue","error"])]),(0,o._)("div",ma,[_a,(0,o._)("ul",ha,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.deliveries,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.id,class:"options__item"},[(0,o._)("label",ga,[(0,o.wy)((0,o._)("input",{class:"options__radio sr-only",type:"radio",name:"delivery",value:t.id,"onUpdate:modelValue":e[5]||(e[5]=t=>i.currentDeliveryId=t)},null,8,fa),[[a.G2,i.currentDeliveryId]]),(0,o._)("span",ya,[(0,o.Uk)((0,C.zw)(t.title)+" ",1),(0,o._)("b",null,(0,C.zw)(l.numberFormat(t.price))+" ₽",1)])])])))),128))]),va,(0,o._)("ul",ba,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.payments,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.id,class:"options__item"},[(0,o._)("label",wa,[(0,o.wy)((0,o._)("input",{class:"options__radio sr-only",type:"radio",name:"pay",value:t.id,"onUpdate:modelValue":e[6]||(e[6]=t=>i.currentPaymentId=t)},null,8,ka),[[a.G2,i.currentPaymentId]]),(0,o._)("span",Ia,(0,C.zw)(t.title),1)])])))),128))])])]),(0,o.Wm)(d),(0,o.wy)((0,o._)("div",Ca,[Pa,(0,o._)("p",null,(0,C.zw)(i.formErrorMessage),1)],512),[[a.F8,i.formErrorMessage]])],32)])])}const Fa=["type","placeholder"];function za(t,e,r,a,s,i){const l=(0,o.up)("VFormField");return(0,o.wg)(),(0,o.j4)(l,{title:t.title,error:t.error},{default:(0,o.w5)((()=>[(0,o._)("input",{class:"form__input",type:r.type,placeholder:t.placeholder,onInput:e[0]||(e[0]=(...e)=>t.updateValue&&t.updateValue(...e))},null,40,Fa)])),_:1},8,["title","error"])}const Aa={class:"form__label"},La={class:"form__value"},Ua={key:0,class:"form__error"};function Sa(t,e,r,a,s,i){return(0,o.wg)(),(0,o.iD)("label",Aa,[(0,o.WI)(t.$slots,"default"),(0,o._)("span",La,(0,C.zw)(r.title),1),r.error?((0,o.wg)(),(0,o.iD)("span",Ua,(0,C.zw)(r.error),1)):(0,o.kq)("",!0)])}var Ta={props:{title:{type:String,required:!0},error:{type:String}}};const Va=(0,d.Z)(Ta,[["render",Sa]]);var $a=Va,xa={props:{title:{type:String,required:!0},error:{type:String},placeholder:{type:String,required:!0}},components:{VFormField:$a},emits:["update:modelValue"],methods:{updateValue(t){this.$emit("update:modelValue",t.target.value)}}},Oa={props:{type:{type:String,default:"text"}},mixins:[xa]};const Ma=(0,d.Z)(Oa,[["render",za]]);var Za=Ma;const Ka=["placeholder"];function Wa(t,e,r,a,s,i){const l=(0,o.up)("VFormField");return(0,o.wg)(),(0,o.j4)(l,{title:t.title,error:t.error},{default:(0,o.w5)((()=>[(0,o._)("textarea",{class:"form__input form__input--area",name:"comments",placeholder:t.placeholder,onInput:e[0]||(e[0]=(...e)=>t.updateValue&&t.updateValue(...e))},null,40,Ka)])),_:1},8,["title","error"])}var qa={mixins:[xa]};const ja=(0,d.Z)(qa,[["render",Wa]]);var Ea=ja;const Ha={class:"cart__block"},Ya={class:"cart__total"},Na=(0,o._)("p",null,[(0,o.Uk)("Доставка: "),(0,o._)("b",null,"бесплатно")],-1),Ra={class:"cart__button button button--primery",type:"submit"};function Ga(t,e,r,s,i,l){const c=(0,o.up)("OrderProductsList");return(0,o.wg)(),(0,o.iD)("div",Ha,[(0,o.Wm)(c,{products:t.products},null,8,["products"]),(0,o._)("div",Ya,[Na,(0,o._)("p",null,[(0,o.Uk)(" Итого: "),(0,o._)("b",null,(0,C.zw)(t.totalAmount),1),(0,o.Uk)(" товара на сумму "),(0,o._)("b",null,(0,C.zw)(l.numberFormat(t.totalPrice))+" ₽",1)])]),(0,o.wy)((0,o._)("button",Ra," Оформить заказ ",512),[[a.F8,0!==t.totalAmount]])])}const Ba={key:0,class:"cart__descr"},Ja={key:1,class:"cart__orders"};function Qa(t,e,r,a,s,i){const l=(0,o.up)("OrderProductItem");return 0===r.products.length?((0,o.wg)(),(0,o.iD)("p",Ba," Здесь пока пусто... ")):((0,o.wg)(),(0,o.iD)("ul",Ja,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.products,(t=>((0,o.wg)(),(0,o.j4)(l,{key:t.product.id,item:t},null,8,["item"])))),128))]))}const Xa={class:"cart__order"};function to(t,e,r,a,s,i){return(0,o.wg)(),(0,o.iD)("li",Xa,[(0,o._)("h3",null,(0,C.zw)(i.title),1),(0,o._)("b",null,(0,C.zw)(i.numberFormat(i.price))+" ₽",1),(0,o._)("span",null,"Артикул: "+(0,C.zw)(i.id),1),(0,o._)("span",null,"Количество: "+(0,C.zw)(i.amount),1)])}var eo={props:{item:{type:Object,required:!0}},computed:{product(){return this.item.product},price(){return this.item.price*this.amount},title(){return this.product.title},id(){return this.product.id},amount(){return this.item.quantity}},methods:{numberFormat:Ht}};const ro=(0,d.Z)(eo,[["render",to]]);var ao=ro,oo={components:{OrderProductItem:ao},props:{products:{type:Array}}};const so=(0,d.Z)(oo,[["render",Qa],["__scopeId","data-v-3cd439ba"]]);var io=so,lo={components:{OrderProductsList:io},computed:{...(0,V.Se)("products",{products:"cartDetailProducts",totalPrice:"cartTotalPrice",totalAmount:"getTotalAmount"})},methods:{numberFormat:Ht}};const co=(0,d.Z)(lo,[["render",Ga]]);var no=co,uo={data(){return{formData:{},formError:{},formErrorMessage:"",deliveriesInfo:null,paymentInfo:null,currentDeliveryId:0,currentPaymentId:0,formLoading:!1,deliveryInfoLoading:!1,deliveryInfoLoadingFaild:!1,paymentInfoLoading:!1,paymentInfoLoadingFailed:!1}},components:{VFormText:Za,VFormTextareaVue:Ea,OrderProductsPanel:no},computed:{deliveries:{get(){return this.deliveriesInfo},cache:!0},payments:{get(){return this.paymentInfo},cache:!0}},methods:{...(0,V.OI)("products",{resetCart:"resetCart",updateOrderInfo:"updateOrderInfo"}),numberFormat:Ht,makeOrder(){this.formError={},this.formErrorMessage="",this.formLoading=!0,At.Z.post(`${Lt}/api/orders`,{...this.formData,deliveryTypeId:this.currentDeliveryId,paymentTypeId:this.currentPaymentId},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.formLoading=!1,this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",t.data),this.$router.push({name:"order-info",params:{id:t.data.id}})})).catch((t=>{this.formError=t.response.data.error.request||{},this.formErrorMessage=t.response.data.error.message,this.formLoading=!1}))},getDeliveryInfo(){this.deliveryInfoLoading=!0,this.deliveryInfoLoadingFaild=!1,At.Z.get(`${Lt}/api/deliveries`).then((t=>{this.deliveryInfoLoading=!1,this.deliveriesInfo=t.data||[],this.currentDeliveryId=this.deliveriesInfo[0].id})).catch((()=>this.deliveryInfoLoadingFaild=!0))},getPaymentInfo(){this.paymentInfoLoading=!0,this.paymentInfoLoadingFailed=!1,At.Z.get(`${Lt}/api/payments`,{params:{deliveryTypeId:this.currentDeliveryId}}).then((t=>{this.paymentInfoLoading=!1,this.paymentInfo=t.data,this.currentPaymentId=this.paymentInfo[0].id})).catch((()=>this.paymentInfoLoadingFailed=!0))}},watch:{currentDeliveryId(){this.getPaymentInfo()}},created(){this.getDeliveryInfo()}};const po=(0,d.Z)(uo,[["render",Da]]);var mo=po;const _o={class:"content container"},ho={class:"content__top"},go={class:"breadcrumbs"},fo={class:"breadcrumbs__item"},yo={class:"breadcrumbs__item"},vo=(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),bo={class:"content__title"},wo={class:"cart"},ko={class:"cart__form form"},Io={class:"cart__field"},Co=(0,o._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),Po={class:"dictionary"},Do={class:"cart__block"},Fo={class:"cart__total"};function zo(t,e,r,s,i,l){const c=(0,o.up)("RouterLink"),n=(0,o.up)("OrderInfoCustomerItem"),u=(0,o.up)("OrderProductsList");return(0,o.wg)(),(0,o.iD)("main",_o,[(0,o._)("div",ho,[(0,o._)("ul",go,[(0,o._)("li",fo,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",yo,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),vo]),(0,o._)("h1",bo,[(0,o.Uk)((0,C.zw)(l.orderTitle)+" ",1),(0,o._)("span",null,"№ "+(0,C.zw)(l.orderId),1)])]),(0,o._)("section",wo,[(0,o._)("form",ko,[(0,o._)("div",Io,[Co,(0,o._)("ul",Po,[(0,o.Wm)(n,{title:"Получатель",descr:l.customerName},null,8,["descr"]),(0,o.Wm)(n,{title:"Адрес доставки",descr:l.customerAddress},null,8,["descr"]),(0,o.Wm)(n,{title:"Телефон",descr:l.customerPhone},null,8,["descr"]),(0,o.Wm)(n,{title:"Email",descr:l.customerEmail},null,8,["descr"]),(0,o.Wm)(n,{title:"Способ оплаты",descr:l.paymentType},null,8,["descr"]),(0,o.wy)((0,o.Wm)(n,{title:"Комментарий",descr:l.customerComment},null,8,["descr"]),[[a.F8,l.customerComment]])])]),(0,o._)("div",Do,[(0,o.Wm)(u,{products:l.orderItems},null,8,["products"]),(0,o._)("div",Fo,[(0,o._)("p",null,[(0,o.Uk)((0,C.zw)(l.deliveryInfo.title)+": ",1),(0,o._)("b",null,(0,C.zw)(0===l.deliveryInfo.price?`${l.numberFormat(l.deliveryInfo.price)} ₽`:"Бесплатно"),1)]),(0,o._)("p",null,[(0,o.Uk)("Итого: "),(0,o._)("b",null,(0,C.zw)(l.totalAmount),1),(0,o.Uk)(" товара на сумму "),(0,o._)("b",null,(0,C.zw)(l.totalPrice)+" ₽",1)])])])])])])}const Ao={class:"dictionary__item"},Lo={class:"dictionary__key"},Uo={class:"dictionary__value"};function So(t,e,r,a,s,i){return(0,o.wg)(),(0,o.iD)("li",Ao,[(0,o._)("span",Lo,(0,C.zw)(r.title),1),(0,o._)("span",Uo,(0,C.zw)(r.descr),1)])}var To={props:{title:{type:String,required:!0},descr:{type:String,required:!0}}};const Vo=(0,d.Z)(To,[["render",So]]);var $o=Vo,xo={components:{OrderInfoCustomerItem:$o,OrderProductsList:io},computed:{...(0,V.rn)("products",{orderInfo:t=>t.orderInfo||{}}),orderItems(){return this.orderInfo.basket.items||{}},totalAmount(){return this.orderItems.reduce(((t,e)=>t+e.quantity),0)||0},orderId(){return this.orderInfo.id},totalPrice(){return this.numberFormat(this.orderInfo.totalPrice)},customerName(){return this.orderInfo.name},customerAddress(){return this.orderInfo.address},customerPhone(){return this.orderInfo.phone},customerEmail(){return this.orderInfo.email},paymentType(){return this.orderInfo.paymentType},customerComment(){return this.orderInfo.comment?this.orderInfo.comment:""},deliveryInfo(){return this.orderInfo.deliveryType},orderStatus(){return this.orderInfo.status},orderTitle(){return this.orderStatus.title}},methods:{...(0,V.nv)("products",{loadOrderInfo:"loadOrderInfo"}),numberFormat:Ht},created(){this.orderInfo&&this.orderInfo===this.$route.params.id||this.loadOrderInfo(this.$route.params.id)}};const Oo=(0,d.Z)(xo,[["render",zo]]);var Mo=Oo;const Zo=[{name:"main",component:ue,path:"/"},{name:"product",component:nr,path:"/product/:id"},{name:"cart",component:ra,path:"/cart"},{name:"order",component:mo,path:"/order"},{name:"order-info",component:Mo,path:"/order/:id"},{name:"notFound",component:mr,path:"/:pathMatch(.*)"}],Ko=(0,M.p7)({history:(0,M.PO)("/"),routes:Zo});var Wo=Ko;const qo={namespaced:!0,state:()=>({cartProductsData:[],orderInfo:null,productsCartLoadingStatus:!1,productsCartLoadingFailed:!1}),mutations:{updateOrderInfo(t,e){t.orderInfo=e},resetCart(t){t.cartProductsData=[]},updateCartProductsAmount(t,{productId:e,amount:r}){const a=t.cartProductsData.find((t=>t.product.id===e));a&&(a.amount=r)},updateCartProductsData(t,e){t.cartProductsData=e}},getters:{cartDetailProducts(t){return t.cartProductsData.map((t=>({...t,image:t.color.gallery?t.color.gallery[0].file.url:"https://t-bike.ru/images/products/no-image.jpg"})))},cartTotalPrice(t,e){return e.cartDetailProducts.reduce(((t,e)=>e.price*e.quantity+t),0)},getTotalAmount(t,e){return e.cartDetailProducts.reduce(((t,e)=>t+e.quantity),0)}},actions:{async loadCart({state:t,commit:e,rootState:r}){return t.productsCartLoadingStatus=!0,t.productsCartLoadingFailed=!1,At.Z.get(`${Lt}/api/baskets`,{params:{userAccessKey:r.userAccessKey}}).then((t=>{if(!r.userAccessKey){const{accessKey:r}=t.data.user;localStorage.setItem("accessKey",r),e("updateUserAccessKey",r,{root:!0})}e("updateCartProductsData",t.data.items)})).catch((()=>{t.productsCartLoadingFailed=!0})).then((()=>{t.productsCartLoadingStatus=!1}))},async addProductToCart({commit:t,rootState:e},{productId:r,colorId:a,sizeId:o,quantity:s}){return At.Z.post(`${Lt}/api/baskets/products`,{productId:r,colorId:a,sizeId:o,quantity:s},{params:{userAccessKey:e.userAccessKey}}).then((e=>{t("updateCartProductsData",e.data.items)}))},async updateCartProductAmount({commit:t,rootState:e},{productId:r,quantity:a}){if(t("updateCartProductsAmount",{productId:r,amount:a}),!(a<1))return At.Z.put(`${Lt}/api/baskets/products`,{basketItemId:r,quantity:a},{params:{userAccessKey:e.userAccessKey}}).then((e=>{t("updateCartProductsData",e.data.items)}))},async deleteCartProduct({commit:t,rootState:e},{productId:r}){return At.Z["delete"](`${Lt}/api/baskets/products`,{data:{basketItemId:r},params:{userAccessKey:e.userAccessKey}}).then((e=>{t("updateCartProductsData",e.data.items)}))},async loadOrderInfo({commit:t,rootState:e},r){return At.Z.get(`${Lt}/api/orders/${r}`,{params:{userAccessKey:e.userAccessKey}}).then((e=>{t("updateOrderInfo",e.data)}))}}};var jo=(0,V.MT)({state:()=>({userAccessKey:null}),modules:{products:qo},mutations:{updateUserAccessKey(t,e){t.userAccessKey=e}}}),Eo=r(5658);const Ho={en:{red:"Red",blue:"Blue",green:"Green",yellow:"Yellow",purple:"Purple",pink:"Pink",black:"Black",white:"White"},ru:{red:"Красный",blue:"Синий",green:"Зеленый",yellow:"Желтый",purple:"Фиолетовый",pink:"Розовый",black:"Черный",white:"Белый"}},Yo=(0,Eo.o)({locale:"ru",messages:Ho});var No=Yo;(0,a.ri)(O).use(jo).use(Wo).use(No).mount("#app")}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a].call(s.exports,s,s.exports,r),s.exports}r.m=t,function(){var t=[];r.O=function(e,a,o,s){if(!a){var i=1/0;for(u=0;u<t.length;u++){a=t[u][0],o=t[u][1],s=t[u][2];for(var l=!0,c=0;c<a.length;c++)(!1&s||i>=s)&&Object.keys(r.O).every((function(t){return r.O[t](a[c])}))?a.splice(c--,1):(l=!1,s<i&&(i=s));if(l){t.splice(u--,1);var n=o();void 0!==n&&(e=n)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[a,o,s]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,s,i=a[0],l=a[1],c=a[2],n=0;if(i.some((function(e){return 0!==t[e]}))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(c)var u=c(r)}for(e&&e(a);n<i.length;n++)s=i[n],r.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return r.O(u)},a=self["webpackChunkmoire"]=self["webpackChunkmoire"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(888)}));a=r.O(a)})();
//# sourceMappingURL=app.f4007fb6.js.map